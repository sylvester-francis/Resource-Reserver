# =============================================================================
# Resource Reserver - Docker Deployment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment.
# This file is used by docker-compose.yml for enterprise deployments.
#
# For deployments behind a corporate proxy or firewall, the frontend uses
# Next.js rewrites to proxy API calls through the frontend server, avoiding
# direct browser-to-backend connections that may be blocked.
# =============================================================================

# -----------------------------------------------------------------------------
# NETWORK CONFIGURATION
# -----------------------------------------------------------------------------

# Frontend external port (the port users access in their browser)
# Default: 8081 (avoids conflict with common development ports)
FRONTEND_PORT=8081

# Backend external port (only needed if exposing API directly)
# Set to empty to disable external access: BACKEND_PORT=
BACKEND_PORT=8000

# Redis external port (only needed for external cache access)
# Set to empty to disable external access: REDIS_PORT=
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# PROXY CONFIGURATION (for corporate/enterprise networks)
# -----------------------------------------------------------------------------

# HTTP proxy for outbound connections during build and runtime
# Example: http://proxy.corporate.com:8080
HTTP_PROXY=
HTTPS_PROXY=

# Hosts that should bypass the proxy (comma-separated)
# Include internal hostnames, container names, and local addresses
NO_PROXY=localhost,127.0.0.1,backend,redis,.local

# -----------------------------------------------------------------------------
# API PROXY MODE (RECOMMENDED FOR ENTERPRISE)
# -----------------------------------------------------------------------------
# When NEXT_PUBLIC_API_URL is empty, the frontend proxies all API requests
# through Next.js rewrites. This is the recommended configuration for:
#   - Corporate networks with HTTP proxies
#   - Deployments where the backend is not directly accessible from browsers
#   - Simplified CORS configuration
#
# The frontend container uses INTERNAL_API_URL for server-side communication
# with the backend (container-to-container networking).

# Leave empty to use API proxy mode (recommended for enterprise)
# Set to full URL only if browsers can directly reach the backend
# Example for direct mode: NEXT_PUBLIC_API_URL=http://your-server:8000
NEXT_PUBLIC_API_URL=

# Internal API URL for server-side requests (container-to-container)
# This should typically remain as the Docker service name
INTERNAL_API_URL=http://backend:8000

# -----------------------------------------------------------------------------
# SECURITY CONFIGURATION
# -----------------------------------------------------------------------------

# REQUIRED: Change this to a secure random string in production!
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-in-production

# JWT token algorithm and expiration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------

# SQLite (default, suitable for small deployments)
DATABASE_URL=sqlite:///./data/db/resource_reserver.db

# PostgreSQL (recommended for production)
# DATABASE_URL=postgresql://user:password@postgres:5432/resource_reserver

# -----------------------------------------------------------------------------
# REDIS CACHE CONFIGURATION
# -----------------------------------------------------------------------------

# Redis connection URL (use Docker service name in compose)
REDIS_URL=redis://redis:6379/0

# Enable/disable caching
CACHE_ENABLED=true

# Cache TTL settings (in seconds)
CACHE_TTL_RESOURCES=30
CACHE_TTL_STATS=60
CACHE_TTL_USER_SESSION=300

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------

# Enable rate limiting (recommended for production)
RATE_LIMIT_ENABLED=true

# Rate limits per user type
RATE_LIMIT_ANONYMOUS=60/minute
RATE_LIMIT_AUTHENTICATED=200/minute
RATE_LIMIT_ADMIN=500/minute
RATE_LIMIT_AUTH=30/minute
RATE_LIMIT_HEAVY=20/minute

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION (SMTP)
# -----------------------------------------------------------------------------

# Enable email notifications
EMAIL_ENABLED=false

# SMTP server settings
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@resource-reserver.local
SMTP_FROM_NAME=Resource Reserver
SMTP_TLS=true
SMTP_SSL=false

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------

# Environment mode
ENVIRONMENT=production
NODE_ENV=production

# Debug mode (disable in production)
DEBUG=false

# Default CSV import path for resources
DEFAULT_CSV_PATH=data/csv/resources.csv
