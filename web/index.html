<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resource Reservation System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <!-- App content will be rendered here -->
    </div>

    <!-- Modals -->
    
    <!-- Resource Availability Modal -->
    <div id="availabilityModal" class="modal hidden">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="modal-title">Resource Availability</h2>
                <button class="modal-close" onclick="closeModal('availabilityModal')">&times;</button>
            </div>
            <div id="availabilityContent">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Reservation Modal -->
    <div id="reservationModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create Reservation</h2>
                <button class="modal-close" onclick="closeModal('reservationModal')">&times;</button>
            </div>
            <form id="reservationForm" onsubmit="handleCreateReservation(event)">
                <div id="selectedResourceInfo" class="alert alert-info mb-4 hidden"></div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" class="form-input" name="startDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Start Time</label>
                        <input type="time" class="form-input" name="startTime" required>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">End Date</label>
                        <input type="date" class="form-input" name="endDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">End Time</label>
                        <input type="time" class="form-input" name="endTime" required>
                    </div>
                </div>

                <div id="reservationError" class="alert alert-error hidden"></div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('reservationModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Reservation</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Time Search Modal -->
    <div id="timeSearchModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Search by Time</h2>
                <button class="modal-close" onclick="closeModal('timeSearchModal')">&times;</button>
            </div>
            <form id="timeSearchForm" onsubmit="handleTimeSearch(event)">
                <div class="form-group">
                    <label class="form-label">Search Query (optional)</label>
                    <input type="text" class="form-input" name="query" placeholder="e.g., conference room">
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Available From</label>
                        <input type="datetime-local" class="form-input" name="availableFrom" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Available Until</label>
                        <input type="datetime-local" class="form-input" name="availableUntil" required>
                    </div>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: var(--space-2); cursor: pointer;">
                        <input type="checkbox" name="availableOnly" checked>
                        <span>Show only available resources</span>
                    </label>
                </div>

                <div id="timeSearchError" class="alert alert-error hidden"></div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('timeSearchModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Search</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Resource Modal -->
    <div id="createResourceModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create Resource</h2>
                <button class="modal-close" onclick="closeModal('createResourceModal')">&times;</button>
            </div>
            <form id="createResourceForm" onsubmit="handleCreateResource(event)">
                <div class="form-group">
                    <label class="form-label">Resource Name</label>
                    <input type="text" class="form-input" name="name" placeholder="e.g., Conference Room A" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Tags (comma-separated)</label>
                    <input type="text" class="form-input" name="tags" placeholder="e.g., meeting, conference, projector">
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: var(--space-2); cursor: pointer;">
                        <input type="checkbox" name="available" checked>
                        <span>Available for booking</span>
                    </label>
                </div>

                <div id="createResourceError" class="alert alert-error hidden"></div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('createResourceModal')">Cancel</button>
                    <button type="submit" class="btn btn-success">Create Resource</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Upload CSV Modal -->
    <div id="uploadCsvModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Upload Resources CSV</h2>
                <button class="modal-close" onclick="closeModal('uploadCsvModal')">&times;</button>
            </div>
            
            <div class="alert alert-info">
                <strong>CSV Format:</strong> name,tags,available<br>
                <small>Example: "Conference Room A","meeting,large",true</small>
            </div>

            <form id="uploadCsvForm" onsubmit="handleUploadCsv(event)">
                <div class="form-group">
                    <label class="form-label">Select CSV File</label>
                    <input type="file" class="form-input" name="csvFile" accept=".csv" required>
                </div>

                <div id="uploadCsvError" class="alert alert-error hidden"></div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('uploadCsvModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Upload</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>